"use strict";(self.webpackChunkharlequin_oss_docs=self.webpackChunkharlequin_oss_docs||[]).push([[592],{8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}},9139:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"configuration/templates","title":"Templates","description":"Selebrow templates use the Go text/template syntax.","source":"@site/docs/configuration/templates.md","sourceDirName":"configuration","slug":"/configuration/templates","permalink":"/docs/configuration/templates","draft":false,"unlisted":false,"editUrl":"https://github.com/selebrow/selebrow-website/tree/main/docs/configuration/templates.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Templates","toc_max_heading_level":4},"sidebar":"tutorialSidebar","previous":{"title":"Parameters","permalink":"/docs/configuration/parameters"}}');var i=s(4848),l=s(8453);const a={sidebar_position:1,title:"Templates",toc_max_heading_level:4},t=void 0,o={},d=[{value:"values.yaml",id:"valuesyaml",level:2},{value:"pod-template.yaml",id:"pod-templateyaml",level:2},{value:"<code>.Values.*</code>",id:"values",level:3},{value:"<code>.Browser.*</code>",id:"browser",level:3},{value:"<code>Image</code>",id:"image",level:4},{value:"<code>Cmd</code>",id:"cmd",level:4},{value:"<code>Ports</code>",id:"ports",level:4},{value:"<code>Path</code>",id:"path",level:4},{value:"<code>Env</code>",id:"env",level:4},{value:"<code>Limits</code>",id:"limits",level:4},{value:"<code>.Options.*</code>",id:"options",level:3},{value:"<code>Env</code>",id:"env-1",level:4},{value:"<code>VNCEnabled</code>",id:"vncenabled",level:4},{value:"<code>Resolution</code>",id:"resolution",level:4},{value:"<code>Labels</code>",id:"labels",level:4},{value:"<code>Hosts</code>",id:"hosts",level:4},{value:"<code>.CIEnvironment.*</code>",id:"cienvironment",level:3},{value:"<code>JobID</code>",id:"jobid",level:4},{value:"<code>ProjectNamespace</code>",id:"projectnamespace",level:4},{value:"<code>ProjectName</code>",id:"projectname",level:4}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Selebrow templates use the Go ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/text/template",children:"text/template"})," syntax.\nAdditionally, all ",(0,i.jsx)(n.a,{href:"https://masterminds.github.io/sprig/",children:"Sprig functions"})," are freely available to use in templates."]}),"\n",(0,i.jsxs)(n.p,{children:["Default template files are in the ",(0,i.jsx)(n.code,{children:"config/"})," directory. See also ",(0,i.jsx)(n.a,{href:"/docs/configuration/parameters#kube-templates-path",children:"kube-templates-path"})," parameter description"]}),"\n",(0,i.jsx)(n.h2,{id:"valuesyaml",children:"values.yaml"}),"\n",(0,i.jsxs)(n.p,{children:["Must be a map with static values which will then be available as ",(0,i.jsx)(n.code,{children:".Values.*"})," in the Pod template. This is a very similar concept to\nHelm ",(0,i.jsx)(n.a,{href:"https://helm.sh/docs/chart_template_guide/values_files/",children:"values files"})]}),"\n",(0,i.jsx)(n.h2,{id:"pod-templateyaml",children:"pod-template.yaml"}),"\n",(0,i.jsxs)(n.p,{children:["The result of rendering this template must be a valid Yaml/Json ",(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/",children:"Pod"})," manifest\nwith at least one container representing the browser container."]}),"\n",(0,i.jsx)(n.p,{children:"Multiple variables are available in the Pod template:"}),"\n",(0,i.jsx)(n.h3,{id:"values",children:(0,i.jsx)(n.code,{children:".Values.*"})}),"\n",(0,i.jsxs)(n.p,{children:["Every value ",(0,i.jsx)(n.code,{children:"X"})," defined in ",(0,i.jsx)(n.a,{href:"#valuesyaml",children:"values.yaml"})," is available in the template as ",(0,i.jsx)(n.code,{children:".Values.X"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"browser",children:(0,i.jsx)(n.code,{children:".Browser.*"})}),"\n",(0,i.jsxs)(n.p,{children:["These values are extracted from the ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers",children:"Browser catalog"})," for requested browser/version."]}),"\n",(0,i.jsx)(n.h4,{id:"image",children:(0,i.jsx)(n.code,{children:"Image"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["Browser image reference including tag. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#image",children:"image"})]}),"\n",(0,i.jsx)(n.h4,{id:"cmd",children:(0,i.jsx)(n.code,{children:"Cmd"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Array of Strings"})}),"\n",(0,i.jsxs)(n.p,{children:["Container command line. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#cmd",children:"cmd"})]}),"\n",(0,i.jsx)(n.h4,{id:"ports",children:(0,i.jsx)(n.code,{children:"Ports"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Map String \u2192 Integer"})}),"\n",(0,i.jsxs)(n.p,{children:["The map of container ports to be exposed. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#ports",children:"ports"})]}),"\n",(0,i.jsx)(n.h4,{id:"path",children:(0,i.jsx)(n.code,{children:"Path"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["HTTP request path prefix. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#path",children:"path"})]}),"\n",(0,i.jsx)(n.h4,{id:"env",children:(0,i.jsx)(n.code,{children:"Env"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Map String \u2192 String"})}),"\n",(0,i.jsxs)(n.p,{children:["Static environment variables. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#env",children:"env"})]}),"\n",(0,i.jsx)(n.h4,{id:"limits",children:(0,i.jsx)(n.code,{children:"Limits"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Map String \u2192 ",(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes",children:"Kubernetes quantity"})]})}),"\n",(0,i.jsxs)(n.p,{children:["Resource limits for browser container. See ",(0,i.jsx)(n.a,{href:"/docs/configuration/browsers#limits",children:"limits"})]}),"\n",(0,i.jsx)(n.h3,{id:"options",children:(0,i.jsx)(n.code,{children:".Options.*"})}),"\n",(0,i.jsx)(n.p,{children:"These values are taken from Webdriver Capability or Playwright request parameters"}),"\n",(0,i.jsx)(n.h4,{id:"env-1",children:(0,i.jsx)(n.code,{children:"Env"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Map String \u2192 String"})}),"\n",(0,i.jsx)(n.p,{children:"Requested additional environment variables. The variables below are always added with values parsed from capabilities:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'ENABLE_VNC: "true"                 # corresponds to VNCEnabled \nSCREEN_RESOLUTION: "1920x1080x24"  # corresponds to Resolution\n'})}),"\n",(0,i.jsx)(n.h4,{id:"vncenabled",children:(0,i.jsx)(n.code,{children:"VNCEnabled"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Boolean"})}),"\n",(0,i.jsx)(n.p,{children:"Indicates whether VNC was enabled in the browser request."}),"\n",(0,i.jsx)(n.h4,{id:"resolution",children:(0,i.jsx)(n.code,{children:"Resolution"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["Screen resolution for X Server (applies only to headed browser requests). Value format is ",(0,i.jsx)(n.code,{children:"WIDTHxHEIGHTxBPP"}),".\nExample: ",(0,i.jsx)(n.code,{children:"1920x1080x24"})]}),"\n",(0,i.jsx)(n.h4,{id:"labels",children:(0,i.jsx)(n.code,{children:"Labels"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Map String \u2192 String"})}),"\n",(0,i.jsx)(n.p,{children:"Pod metadata labels from request."}),"\n",(0,i.jsx)(n.h4,{id:"hosts",children:(0,i.jsx)(n.code,{children:"Hosts"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Map String \u2192 Array of Strings"})}),"\n",(0,i.jsxs)(n.p,{children:["IP to host alias map to be used in Pod's ",(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/network/customize-hosts-file-for-pods/#adding-additional-entries-with-hostaliases",children:"hostAliases"}),"\nbased on host aliases from the browser request."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'"10.1.2.3":\n  - "foo.remote"\n  - "bar.remote"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cienvironment",children:(0,i.jsx)(n.code,{children:".CIEnvironment.*"})}),"\n",(0,i.jsx)(n.p,{children:"These variables are available when Selebrow is run as a Gitlab CI service:"}),"\n",(0,i.jsxs)(n.p,{children:["See also: ",(0,i.jsx)(n.a,{href:"https://docs.gitlab.com/ci/variables/predefined_variables/",children:"Predefined CI/CD variables reference"})]}),"\n",(0,i.jsx)(n.h4,{id:"jobid",children:(0,i.jsx)(n.code,{children:"JobID"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["The value of ",(0,i.jsx)(n.code,{children:"CI_JOB_ID"})," environment variable."]}),"\n",(0,i.jsx)(n.h4,{id:"projectnamespace",children:(0,i.jsx)(n.code,{children:"ProjectNamespace"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["The value of ",(0,i.jsx)(n.code,{children:"CI_PROJECT_NAMESPACE"})," environment variable."]}),"\n",(0,i.jsx)(n.h4,{id:"projectname",children:(0,i.jsx)(n.code,{children:"ProjectName"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"String"})}),"\n",(0,i.jsxs)(n.p,{children:["The value of ",(0,i.jsx)(n.code,{children:"CI_PROJECT_NAME"})," environment variable."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);